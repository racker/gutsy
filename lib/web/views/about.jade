extends layout

block content
  | <script >
  | $(function() {
  |   $("table#defects").tablesorter();
  | });
  | </script>
  .container
    .content
      .hero-unit
        h1 About this website
        h3 API-driven DevOps Dashboard

      p This website is running <a href="http://github.com/racker/gutsy">Gutsy</a>.

      p All content is automatically generated based from the <a href="http://github.com/racker/devopsjson">devops.json</a> endpoints listed in the website's local settings file.

      p Please send questions and feedback to <a href="mailto:gutsy@lists.rackspace.com">gutsy@lists.rackspace.com</a>.

      a(name="service-health")
      h2 Service health
      p To add service health, simply post JSON to
        pre http://gutsy.k1k.me/p/project_name/api

      p It should have this structure:

      pre
        |{
        |    "service-1": {
        |        "healthy": true,
        |        "metrics": [{
        |            "type": "int",
        |            "name": "call_provider_method_calls_pending",
        |            "value": 0
        |        },
        |        {
        |            "type": "gauge",
        |            "name": "call_provider_method_calls_total",
        |            "value": 1081
        |        },
        |        {
        |            "type": "float",
        |            "name": "call_provider_method_time_ms_avg",
        |            "value": 1466.1632126729648
        |        },
        |        {
        |            "comment": "received data/heartbeat within interval",
        |            "type": "boolean",
        |            "name": "rabbitmq.consuming",
        |            "value": true
        |        }],
        |        "state_from_metrics": ["rabbitmq.consuming"],
        |        "service": "service_category"
        |    },
        |    "stats_proxy": {
        |        "healthy": true,
        |        "metrics": [{
        |            "type": "int",
        |            "name": "gutsy_stats_post_fail",
        |            "value": 4
        |        },
        |        {
        |            "type": "int",
        |            "name": "gutsy_stats_post_success",
        |            "value": 137
        |        },
        |        {
        |            "type": "float",
        |            "name": "uptime",
        |            "value": 8460.4172270298
        |        },
        |        {
        |            "comment": "ok",
        |            "type": "boolean",
        |            "name": "ok",
        |            "value": true
        |        }],
        |        "state_from_metrics": ["ok"],
        |        "service": "stats_proxy"
        |    }
        |}

      a(name="creds")
      h2 External credentials
      p This field is not required, but it's useful if your devops.json is publicly viewable. A public devops.json can't contain sensitive information such as credentials.  To enter credentials into Gutsy, simply edit your project and toss some JSON in the credentials field.
        img(src="/static/images/example_creds.png", style="float: right;")
        br
        | Here's some example JSON to make editing easier:
      pre(style="width: 50%;")
        |{
        |    "new_relic": {
        |        "apikey": "1234567890234567",
        |        "accountId": "12345",
        |        "appid": "1234567"
        |    }
        |    "version_one": {
        |        "host": "www42.v1host.com",
        |        "port": 443,
        |        "name": "COMPANY",
        |        "project": [2501],
        |        "auth": "Username:password"
        |    },
        |    "github": {
        |      "username": "username",
        |      "apikey": "1234567890abc"
        |    }
        |}
      p This field is write-only. It will always be blank if you edit the project.
